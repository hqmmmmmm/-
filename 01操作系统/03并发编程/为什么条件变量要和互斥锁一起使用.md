为什么条件变量要和互斥锁一起使用？

1.条件变量进行等待之前需要先进行条件判断，条件本身也属于临界资源，所以访问时需要加锁。

2.条件判断和加入等待队列应该是一个原子操作，假设不是一个原子操作，如果进行条件判断后，紧接着另一个线程修改了条件，并且通知了等待的线程，但是因为当前线程还没有加入等待队列，就会漏掉这个通知。


https://www.zhihu.com/question/587575043?write