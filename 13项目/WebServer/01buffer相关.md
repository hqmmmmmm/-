### 为什么需要应用层缓冲区？

非阻塞网络编程的核心思想就是避免阻塞在read/write系统调用上，这样可以最大限度地复用线程，让一个线程为多个连接服务。此时必须要使用应用层缓冲区，如下：  

output buffer：当我们执行write操作后，可能操作系统一次性没有接收完，如果有应用层缓冲区，我们可以直接将剩余数据放入output buffer中然后注册POLLOUT事件，socket可写时再将数据写入。  

input buffer：当我们执行read操作后，读到的数据不一定是完整的，可以先将数据读到input buffer中然后注册POLLIN事件，socket可读时再将数据读入。 

### 分散读以及扩容
epoll在ET边缘触发模式下搭配非阻塞IO需要将数据一次性读到缓冲区，所以按理来说应该准备一个比较大的缓冲区，但是因为我们不知道具体要读多少数据，缓冲区的大小不好设置，可能会浪费空间或者装不下去。所以我在读的时候会在栈上开辟一块临时缓冲区，使用linux中的分散度readv同时向这两个缓冲区去读数据，读完之后检测一下栈上的临时缓冲区中是否有数据，如果有的话，说明我们原来的缓冲区空间不够了，需要扩容，扩容的原则就是判断一下还没写的空间是否足够存放对应大小的数据，如果够的话直接写，不需要扩容；如果不够的话再判断一下已经读过的空间+还没写的空间加起来是否足够；如果还是不够的话，就是用vector的resize方法对缓冲区进行扩容。

### 大文件传输


### 如果读到的数据是不完整的进行解析的话会发生什么？