## shared_ptr的线程安全问题
`shared_ptr`的线程安全问题主要包括3点
- 引用计数的加减操作是否线程安全？
`shared_ptr`保证了引用计数的加减是一个原子操作，所以这个是线程安全的。
- `shared_ptr`修改指向时是否线程安全？（这个还没理解透，陈硕那本书里有）
这个要分两种情况讨论。当`shared_ptr`通过引用和指针传递时，不同的线程操作的是同一个`shared_ptr`此时是线程不安全的；当`shared_ptr`通过值传递时，不同的线程操作的不是同一个`shared_ptr`，不过指向的资源是相同的，此时是线程安全的。
- 操作`shared_ptr`指向的数据时是否线程安全？
这个是由所指向的数据类型决定的，这个线程不安全不是由于`shared_ptr`导致的，是因为这个数据类型自身就是线程不安全的。