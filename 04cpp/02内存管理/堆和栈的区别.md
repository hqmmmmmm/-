堆和栈的区别？



管理方式：栈内存由编译器自动管理，不用我们手动控制；堆内存的分配与释放，都是需要我们手动管理的。

空间大小：栈的空间远远小于堆，堆空间的大小几乎没有什么限制，栈空间一般是有一定的空间大小的。

碎片问题：堆上会进行频繁的malloc/free操作，会产生大量的内存碎片，而栈是先进先出的结构，某一个数据弹出之前，它之前所有的数据都已弹出。

生长方向：堆向上扩展，也就是沿着内存地址增加的方向；栈向下扩展，也就是内存地址减小的方向。

分配方式：堆都是动态分配的，栈一般来说都是静态分配的，通过alloca函数可以动态分配。
（动态分配在运行时分配，静态分配在编译时分配）

分配效率：栈是操作系统自动分配的，堆是通过库函数来完成申请分配的，可能还会使用系统调用，所以堆的分配效率比栈低。

